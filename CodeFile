**Find earliest created date for a SalesForce Opportunity**
[First Opportunity Created Date] = DATE( {FIXED [Opportunity ID] : MIN([Created Date])})

**^This expression will be our vertical axis & Cohort groups - convert to month & discrete**

**Calculate the total opportunities that were created in the cohort that closed**
[Total Closed in Cohort] = TOTAL(COUNTD([Opportunity ID]))

**^This expression creates a fixed amount and is not effected by the table, allowing us to do various calculations to the main cohort group**

**Calculate the months between the earliest created date & the closed date**
[Period] = DATEDIFF ('month', [First Opportunity Created Date], ([Close Date]))

**^ This expression will be our horizontal axis, showing us know how many opps are closed after x months from the created date, must convert to discrete & dimension**

**Count distinct opportunities that are closed in the respective period - this will act as a variable in our main calculation**
[Opportunities Closed] = COUNTD ([Opportunity ID])

**Calculate the percent of opportunities closed for a given period by the total closed in the respectivie Cohort**
[Closed Percent of Total] = [Opportunities Closed] / [Total Closed in Cohort]

**Calculate main expression - this will show the percentage of opportunities closed of the total in the respective period for all cohort groups**

[Opportunity Calculation] = IFNULL(IIF([Closed Percent of Total] = 0, NULL, [Closed Percent of Total]), RUNNING_AVG([Closed Percent of Total]))
                                    
